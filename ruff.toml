# Ruff configuration for aggressive code quality

target-version = "py313"
line-length = 100

[lint]
# Enable ALL rules then selectively disable
select = ["ALL"]
ignore = [
    "D",      # Docstring checks (we check separately)
    "COM812", # Missing trailing comma (conflicts with black)
    "ISC001", # Single line implicit string concat
]

# Stricter than defaults
fixable = ["ALL"]
unfixable = []

# Exclude legacy code
exclude = [
    "archive/",
    "legacy/",
    "experimental/",
    "*/migrations/",
    "*_pb2.py",
]

[lint.per-file-ignores]
# Tests can be more relaxed
"test_*.py" = [
    "S101",   # Use of assert
    "PLR2004", # Magic numbers allowed in tests
    "N806",   # Variable naming (mathematical notation X, E, I_B, etc.)
    "TID253", # numpy imports are standard in tests
]
"**/tests/*.py" = [
    "S101",
    "PLR2004",
    "N806",   # Variable naming (mathematical notation)
    "TID253", # numpy imports are standard in tests
]
# Spatial algebra uses standard mathematical notation
"**/spatial_algebra/*.py" = [
    "RUF002",  # Mathematical symbols (×) in docstrings
    "RUF003",  # Mathematical symbols (×) in comments
    "N802",    # Function names (mcI is standard notation)
    "N803",    # Argument names (I_com, I_B, X are standard)
    "N806",    # Variable names (mathematical notation)
    "TID253",  # numpy imports are standard in scientific computing
]
# Drake model uses Drake-specific types that don't have stubs
"drake_golf_model.py" = [
    "ANN201",  # Missing return type annotations (Drake types complex)
    "ANN001",  # Missing type annotations for arguments (Drake types)
    "N806",    # Variable naming (X_WG, X_C_H are Drake conventions)
    "E741",    # Ambiguous variable name I (inertia is standard)
    "ARG001",  # Unused arguments (scene_graph may be used later)
    "B008",    # Function call in defaults (GolfModelParams() is acceptable)
    "RET504",  # Unnecessary assignment (readability)
    "TID253",  # numpy imports are standard in scientific computing
]

[lint.mccabe]
max-complexity = 10

[lint.pylint]
max-args = 5
max-branches = 10
max-returns = 3
max-statements = 30

[lint.flake8-quotes]
inline-quotes = "double"
multiline-quotes = "double"
docstring-quotes = "double"

[lint.flake8-import-conventions]
banned-from = ["typing"]

[lint.flake8-tidy-imports]
banned-module-level-imports = ["numpy", "pandas"]  # Must import specific items